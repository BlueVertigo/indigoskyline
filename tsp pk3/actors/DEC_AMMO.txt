//============
// Pistol Ammo
//============

ACTOR TSPPistolAmmoDrop replaces Clip
{
  States
  {
  Spawn:
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("TSPGetGameSkill") == 5,"LoneSurvivorSpawn")
    TNT1 A 0 A_SpawnItemEx("TSPPistolAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
    Stop
  LoneSurvivorSpawn:
    TNT1 A 0 A_Jump(100,"Nothing")
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("TSPPistolAmmoMag",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	Stop
  Nothing:
    TNT1 A 0
    Stop
  }
}

ACTOR TSPPistolAmmo : Ammo
{
	+IGNORESKILL
	Inventory.Amount 5
	Inventory.MaxAmount 150
	Ammo.BackpackAmount 15
	Ammo.BackpackMaxAmount 300
	Ammo.DropAmount 5
	Inventory.Icon "919AA0"
	Inventory.PickupMessage "Picked up a pistol magazine. [\cj+5 Pistol Ammo\c-]"
	Inventory.PickupSound "919m/magout"
	Tag "Pistol Ammo"
	States
	{
	Spawn:
		919A A -1
		Stop
	}
}

ACTOR TSPPistolAmmoMag : Ammo //Magazine version for LS
{
	+IGNORESKILL
	Inventory.Amount 1
	Inventory.MaxAmount 10
	Ammo.BackpackAmount 1
	Ammo.BackpackMaxAmount 15
	Ammo.DropAmount 1
	Inventory.Icon "919AA0"
	Inventory.PickupMessage "Picked up a pistol magazine. [\cj+1 Pistol Magazine\c-]"
	Inventory.PickupSound "919m/magout"
	Tag "Pistol Ammo"
	States
	{
	Spawn:
		919A A -1
		Stop
	}
}


ACTOR TSPPistolAmmoThrown : CustomInventory
{
  States
  {
  Spawn:
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("TSPGetGameSkill") == 5,"LoneSurvivorSpawn")
    TNT1 A 0 A_SpawnItemEx("TSPPistolAmmoThrownNormal",0,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
    Stop
  LoneSurvivorSpawn:
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("TSPPistolAmmoThrownLS",0,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
	Stop
  }
}

ACTOR TSPPistolAmmoThrownNormal : CustomInventory
{
    Inventory.PickupMessage "Picked up a pistol magazine. [\cj+5 Pistol Ammo\c-]"
	Inventory.Amount 1
	Inventory.PickupSound "919m/magout"
	DeathSound "weapons/smallclip"
	+INVENTORY.AUTOACTIVATE
	+CORPSE
	States
	{
	Spawn:
      919F ABCDEFGH 2
	  Loop
	Crash:
	  TNT1 A 0 A_Jump(85,"Crash2")
	  TNT1 A 0 A_Jump(128,"Crash3")
	  TNT1 A 0 A_Jump(128,"Crash4")
	  919F A -1 A_Scream
	  Stop
    Crash2:
	  919F C -1 A_Scream
	  Stop
	Crash3:
	  919F G -1 A_Scream
	  Stop
	Crash4:
	  919F E -1 A_Scream
	  Stop
	Pickup:
	  TNT1 A 0 A_JumpIfInventory("TSPPistolAmmo", 0, "PickupFail")
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmo", 5)
	  Stop
    PickupFail:
      919F A 1
      Fail
	}
}


ACTOR TSPPistolAmmoThrownLS : TSPPistolAmmoThrownNormal
{
    Inventory.PickupMessage "Picked up a pistol magazine. [\cj+1 Pistol Magazine\c-]"
	Inventory.Amount 1
	Inventory.PickupSound "919m/magout"
	+INVENTORY.AUTOACTIVATE
	+CORPSE
	States
	{
	Spawn:
      919F ABCDEFGH 2
	  Loop
	Crash:
	  TNT1 A 0 A_Jump(85,"Crash2")
	  TNT1 A 0 A_Jump(128,"Crash3")
	  TNT1 A 0 A_Jump(128,"Crash4")
	  919F A -1 A_Scream
	  Stop
    Crash2:
	  919F C -1 A_Scream
	  Stop
	Crash3:
	  919F G -1 A_Scream
	  Stop
	Crash4:
	  919F E -1 A_Scream
	  Stop
	Pickup:
	  TNT1 A 0 A_JumpIfInventory("TSPPistolAmmoMag", 0, "PickupFail")
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmoMag", 1)
	  Stop
    PickupFail:
      919F A 1
      Fail
	}
}

/*
ACTOR TSPPistolAmmoThrownA : CustomInventory
{
    Inventory.PickupMessage "Picked up a pistol magazine. [\cj+5 Pistol Ammo\c-]"
	Inventory.Amount 1
	Inventory.PickupSound "919m/magout"
	+INVENTORY.AUTOACTIVATE
	+CORPSE
	States
	{
	Spawn:
	  919F A -1
	  Loop
	Pickup:
	  TNT1 A 0 A_JumpIfInventory("TSPPistolAmmo", 0, "PickupFail")
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmo", 5)
	  Stop
    PickupFail:
      919F A 1
      Fail
	}
}

ACTOR TSPPistolAmmoThrownB : TSPPistolAmmoThrownA
{
	States
	{
	Spawn:
	  919F C -1
	  Loop
	}
}

ACTOR TSPPistolAmmoThrownC : TSPPistolAmmoThrownA
{
	States
	{
	Spawn:
	  919F G -1
	  Loop
	}
}

ACTOR TSPPistolAmmoThrownD : TSPPistolAmmoThrownA
{
	States
	{
	Spawn:
	  919F E -1
	  Loop
	}
}

ACTOR TSPPistolAmmoThrownMagA : CustomInventory
{
    Inventory.PickupMessage "Picked up a pistol magazine. [\cj+1 Pistol Magazine\c-]"
	Inventory.Amount 1
	Inventory.PickupSound "919m/magout"
	+INVENTORY.AUTOACTIVATE
	+CORPSE
	States
	{
	Spawn:
	  919F A -1
	  Loop
	Pickup:
	  TNT1 A 0 A_JumpIfInventory("TSPPistolAmmoMag", 0, "PickupFail")
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmoMag", 1)
	  Stop
    PickupFail:
      919F A 1
      Fail
	}
}

ACTOR TSPPistolAmmoThrownMagB : TSPPistolAmmoThrownMagA
{
	States
	{
	Spawn:
	  919F C -1
	  Loop
	}
}

ACTOR TSPPistolAmmoThrownMagC : TSPPistolAmmoThrownMagA
{
	States
	{
	Spawn:
	  919F G -1
	  Loop
	}
}

ACTOR TSPPistolAmmoThrownMagD : TSPPistolAmmoThrownMagA
{
	States
	{
	Spawn:
	  919F E -1
	  Loop
	}
}
*/

//===============
// Crossbow Bolts
//===============

ACTOR DahliaNormalAmmo : Ammo
{
	Inventory.Amount 10
	Inventory.MaxAmount 40
	Ammo.BackpackAmount 30
	Ammo.BackpackMaxAmount 60
	Inventory.Icon "DCBAA0"
	Inventory.PickupMessage "Picked up a box of crossbow bolts. [\cv+10 Crossbow Bolts\c-]"
	Inventory.PickupSound "dahlia/normalammo"
	States
	{
	Spawn:
		DCBA A -1
		Stop
	}
}

ACTOR DahliaExplosiveAmmo : Ammo
{
	Inventory.Amount 10
	Inventory.MaxAmount 20
	Ammo.BackpackAmount 20
	Ammo.BackpackMaxAmount 40
	Inventory.Icon "DCBXA0"
	Inventory.PickupMessage "Picked up a box of explosive bolts. [\cj+10 Explosive Bolts\c-]"
	Inventory.PickupSound "dahlia/explosiveammo"
	States
	{
	Spawn:
		DCBX A -1
		Stop
	}
}

//=============
// Ammobox Ammo
//=============

ACTOR TSPAmmoBoxAmmoDrop
{
  States
  {
  Spawn:
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("TSPGetGameSkill") == 5,"LoneSurvivorSpawn")
    TNT1 A 0 A_SpawnItemEx("AmmoBoxAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
    Stop
  LoneSurvivorSpawn:
    TNT1 A 0 A_Jump(100,"Nothing")
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("AmmoBoxAmmoMag",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	Stop
  Nothing:
    TNT1 A 0
    Stop
  }
}

ACTOR AmmoBoxAmmo : Ammo
{
	+IGNORESKILL
	Inventory.Amount 15
	Inventory.MaxAmount 150
	Ammo.BackpackAmount 25
	Ammo.BackpackMaxAmount 300
	Inventory.Icon "ABXAA0"
	Inventory.PickupMessage "Picked up machine gun ammo. [\cj+15 SMG Ammo\c-]"
	Inventory.PickupSound "AmmoBox/In"
	States
	{
	Spawn:
		ABXA A -1
		Stop
	}
}

ACTOR AmmoBoxAmmoMag : Ammo
{
	+IGNORESKILL
	Inventory.Amount 1
	Inventory.MaxAmount 5
	Ammo.BackpackAmount 1
	Ammo.BackpackMaxAmount 10
	Inventory.Icon "ABXAA0"
	Inventory.PickupMessage "Picked up machine gun ammo. [\cj+1 SMG Magazine\c-]"
	Inventory.PickupSound "AmmoBox/In"
	States
	{
	Spawn:
		ABXA A -1
		Stop
	}
}

ACTOR TSPBoxofAmmoDrop replaces ClipBox
{
  States
  {
  Spawn:
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("TSPGetGameSkill") == 5,"LoneSurvivorSpawn")
    TNT1 A 0 A_SpawnItemEx("BoxOfAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
    Stop
  LoneSurvivorSpawn:
    TNT1 A 0 A_Jump(100,"Nothing")
	TNT1 A 0 A_Jump(100,"LSSpawn2")
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("BoxOfAmmoLS",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	Stop
  LSSpawn2:
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("DahliaExplosiveAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	Stop  
  Nothing:
    TNT1 A 0
    Stop
  }
}

ACTOR BoxOfAmmo : CustomInventory
{
    Inventory.PickupMessage "Found an assorted ammo crate. [\cj+30 Pistol Ammo\c-][\cj+60 SMG Ammo\c-][\cv+10 Bolts\c-]"
	+INVENTORY.AUTOACTIVATE
	States
	{
	Spawn:
      AMMO A -1
	  Stop
	Pickup:
	  TNT1 A 0 A_JumpIfInventory("DahliaNormalAmmo", 0, "AmmoCheck1")
	  TNT1 A 0 A_GiveInventory("AmmoBoxAmmo", 60)
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmo", 30)
	  TNT1 A 0 A_GiveInventory("DahliaNormalAmmo", 10)
	  Stop
	AmmoCheck1:
      TNT1 A 0 A_JumpIfInventory("AmmoBoxAmmo", 0, "AmmoCheck2")
	  TNT1 A 0 A_GiveInventory("AmmoBoxAmmo", 60)
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmo", 30)
	  TNT1 A 0 A_GiveInventory("DahliaNormalAmmo", 10)
	  Stop
	AmmoCheck2:
      TNT1 A 0 A_JumpIfInventory("TSPPistolAmmo", 0, "PickupFail")
	  TNT1 A 0 A_GiveInventory("AmmoBoxAmmo", 60)
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmo", 30)
	  TNT1 A 0 A_GiveInventory("DahliaNormalAmmo", 10)
	  Stop
	PickupFail:
      AMMO A 1
      Fail
	}
}

ACTOR BoxOfAmmoLS : CustomInventory
{
    Inventory.PickupMessage "Found an assorted ammo crate. [\cj+2 Pistol Magazine\c-][\cj+1 SMG Magazine\c-][\cv+5 Bolts\c-]"
	+INVENTORY.AUTOACTIVATE
	States
	{
	Spawn:
      AMMO A -1
	  Stop
	Pickup:
	  TNT1 A 0 A_JumpIfInventory("DahliaNormalAmmo", 0, "AmmoCheck1")
	  TNT1 A 0 A_GiveInventory("AmmoBoxAmmoMag", 1)
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmoMag", 2)
	  TNT1 A 0 A_GiveInventory("DahliaNormalAmmo", 5)
	  Stop
	AmmoCheck1:
      TNT1 A 0 A_JumpIfInventory("AmmoBoxAmmoMag", 0, "AmmoCheck2")
	  TNT1 A 0 A_GiveInventory("AmmoBoxAmmoMag", 1)
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmoMag", 2)
	  TNT1 A 0 A_GiveInventory("DahliaNormalAmmo", 5)
	  Stop
	AmmoCheck2:
      TNT1 A 0 A_JumpIfInventory("TSPPistolAmmoMag", 0, "PickupFail")
	  TNT1 A 0 A_GiveInventory("AmmoBoxAmmoMag", 1)
	  TNT1 A 0 A_GiveInventory("TSPPistolAmmoMag", 2)
	  TNT1 A 0 A_GiveInventory("DahliaNormalAmmo", 10)
	  Stop
	PickupFail:
      AMMO A 1
      Fail
	}
}

//==============
// Launcher Ammo
//==============

ACTOR ToolboxAmmo : Ammo Replaces RocketAmmo
{
	+IGNORESKILL
	Inventory.Amount 1
	Inventory.MaxAmount 30
	Ammo.BackpackAmount 5
	Ammo.BackpackMaxAmount 60
	Ammo.DropAmount 1
	Scale 0.4
	Inventory.Icon "SRTPA0"
	Inventory.PickupMessage "Picked up a  Rocket. [\cg+1 Launcher Ammo\c-]"
	Inventory.PickupSound "toolbox/ammo1"
	States
	{
	Spawn:
		SRTP A -1
		Stop
	}
}

ACTOR ToolboxRocketBox : ToolboxAmmo replaces RocketBox
{
  +IGNORESKILL
  Inventory.PickupMessage "Picked up a crate of Rockets. [\cg+5 Launcher Ammo\c-]"
  Inventory.PickupSound "toolbox/ammo2"
  Inventory.Amount 5
  scale 1.0
  States
  {
  Spawn:
    RLNB A -1
    Stop
  }
}
