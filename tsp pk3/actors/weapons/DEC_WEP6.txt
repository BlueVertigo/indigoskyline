ACTOR MelTestWeapon : DoomWeapon 
{
  Game Doom
  SpawnID 30
  Weapon.SelectionOrder 100
  Weapon.AmmoUse 1
  Weapon.AmmoGive 40
  Weapon.AmmoType "Cell"
  Inventory.PickupMessage "$GOTPLASMA"
  Tag "$TAG_PLASMARIFLE"
  States
  {
  Ready:
    PLSG A 1 A_WeaponReady
    Loop
  Deselect:
    PLSG A 1 A_Lower
    Loop
  Select:
    PLSG A 1 A_Raise
    Loop
  Fire:
    PLSG A 3 A_FirePlasma
    PLSG B 20 A_ReFire
    Goto Ready
  AltFire:
    PLSG A 3
	PLSF ABABABABAB 2 Bright A_Light1
    PLSF A 4 Bright A_FireCustomMissile("PlasmaBallTest")
    PLSG B 20 A_ReFire
    Goto Ready
  Flash:
    PLSF A 4 Bright A_Light1
    Goto LightDone
    PLSF B 4 Bright A_Light1
    Goto LightDone
  Spawn:
    PLAS A -1
    Stop
  }
}

ACTOR PlasmaBallTest //: FastProjectile
{
  Game Doom
  SpawnID 51
  Radius 6
  Height 6
  Speed 60
  Damage 5
  Scale 0.5
  Projectile
  +RANDOMIZE
  RenderStyle Add
  Alpha 0.75
  SeeSound "weapons/plasmaf"
  DeathSound "weapons/plasmax"
  Obituary "$OB_MPPLASMARIFLE" // "%o was melted by %k's plasma gun."
  //MissileType "PlasmaBallTestTrail"
  //MissileHeight 8
  States
  {
  Spawn:
    PLSS AB 1 Bright
    Loop
  XDeath:
	ARWQ A 0 A_SpawnItemEx("PlasmaShooter1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	TNT1 A 1
    Stop
  Death:
	PLSE ABCDE 2 Bright
    Stop
  }
}

ACTOR PlasmaBallTest2 : FastProjectile
{
  Game Doom
  SpawnID 51
  Radius 6
  Height 6
  Speed 60
  Damage 5
  Scale 0.5
  Projectile
  +RANDOMIZE
  RenderStyle Add
  Alpha 0.75
  SeeSound "weapons/plasmaf"
  DeathSound "weapons/plasmax"
  Obituary "$OB_MPPLASMARIFLE" // "%o was melted by %k's plasma gun."
  MissileType "PlasmaBallTestTrail"
  MissileHeight 8
  States
  {
  Spawn:
    PLSS AB 1 Bright
    Loop
  XDeath:
	ARWQ A 0 A_SpawnItemEx("PlasmaShooter1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	TNT1 A 1
    Stop
  Death:
	PLSE ABCDE 2 Bright
    Stop
  }
}

ACTOR PlasmaBallTestTrail
{
  +NOINTERACTION
  +THRUACTORS
  +NOCLIP
  Scale 0.5
  +RANDOMIZE
  RenderStyle Add
  Alpha 0.75
  States
  {
  Spawn:
    TNT1 A 0
	TNT1 A 0
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("PlasmaBallTestTrail2",1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	TNT1 A 0 A_SpawnItemEx("PlasmaBallTestTrail2",-1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	PLSS ABABABABAB 1 Bright
    PLSS ABABABABAB 1 Bright
	PLSS ABABABABAB 1 Bright
	PLSS ABABABABAB 1 Bright
	//PLSS ABABABABAB 1 Bright
	//PLSS ABABABABAB 1 Bright
    Stop
  }
}

ACTOR PlasmaBallTestTrail2
{
  +NOINTERACTION
  +THRUACTORS
  +NOCLIP
  Scale 0.5
  +RANDOMIZE
  RenderStyle Add
  Alpha 0.75
  States
  {
  Spawn:
    TNT1 A 0
	TNT1 A 0
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("PlasmaBallTestTrail3",1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	TNT1 A 0 A_SpawnItemEx("PlasmaBallTestTrail3",-1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	PLSS BABABABAB 1 Bright
    PLSS ABABABABAB 1 Bright
	PLSS ABABABABAB 1 Bright
	PLSS ABABABABAB 1 Bright
	//PLSS ABABABABAB 1 Bright
	//PLSS ABABABABAB 1 Bright
    Stop
  }
}

ACTOR PlasmaBallTestTrail3
{
  +NOINTERACTION
  +THRUACTORS
  +NOCLIP
  Scale 0.5
  +RANDOMIZE
  RenderStyle Add
  Alpha 0.75
  States
  {
  Spawn:
    TNT1 A 0
	TNT1 A 0
	TNT1 A 0
	PLSS ABABABAB 1 Bright
    PLSS ABABABABAB 1 Bright
	PLSS ABABABABAB 1 Bright
	PLSS ABABABABAB 1 Bright
	//PLSS ABABABABAB 1 Bright
	//PLSS ABABABABAB 1 Bright
    Stop
  }
}

ACTOR PlasmaShooter1
{
  Health 600
  Radius 1
  Height 1
  Mass 100
  Speed 0

  Monster
  //+FLOORCLIP
  +THRUACTORS
  +NOGRAVITY
  +FRIENDLY
  +ALWAYSFAST
  +LOOKALLAROUND
  -SOLID
  +SHOOTABLE

  States
  {
  Spawn:
    TNT1 A 0
	TNT1 A 0
	TNT1 A 0
	TNT1 A 0
	TNT1 A 0
	TNT1 AAA 1 A_LookEx(0,30,600)
    Stop
  See:
    TNT1 AAA 1 A_Chase
    Stop
  Missile:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_CustomMissile("PlasmaBallTest2",0)
	TNT1 A 0 A_SpawnItemEx("PlasmaBallTestTrail3",1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	TNT1 A 0 A_SpawnItemEx("PlasmaBallTestTrail3",-1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
    Stop
  }
}
